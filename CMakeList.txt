cmake_minimum_required( VERSION 2.8.12 )

project( date_prj )

find_package( CURL REQUIRED )
find_package( OpenSSL REQUIRED )

set( HEADER_FOLDER "include" )
set( SOURCE_FOLDER "src" )
set( TEST_FOLDER "test" )

include_directories( ${HEADER_FOLDER} )
include_directories( SYSTEM ${OPENSSL_INCLUDE_DIR} )
include_directories( SYSTEM ${CURL_INCLUDE_DIRS} )

link_directories( "${CMAKE_BINARY_DIR}/install/lib" )

# This is needed so IDE's live MSVC show header files
set( HEADER_FILES
	${HEADER_FOLDER}/date/chrono_io.h
	${HEADER_FOLDER}/date/date.h
	${HEADER_FOLDER}/date/ios.h
	${HEADER_FOLDER}/date/islamic.h
	${HEADER_FOLDER}/date/iso_week.h
	${HEADER_FOLDER}/date/julian.h
	${HEADER_FOLDER}/date/tz.h
	${HEADER_FOLDER}/date/tz_private.h
)

#add_definitions( -DUSE_AUTOLOAD=1 )
#add_definitions( -DHAS_REMOTE_API=1 )
#add_definitions( -DUSE_OS_TZDB=0 )
#add_definitions( -DINSTALL=. )

add_library( tz ${HEADER_FILES} ${SOURCE_FOLDER}/tz.cpp )
target_link_libraries( tz ${CMAKE_THREAD_LIBS_INIT} ${CURL_LIBRARIES} ${OPENSSL_LIBRARIES} )

install( TARGETS tz DESTINATION lib )
install( DIRECTORY ${HEADER_FOLDER}/ DESTINATION include/date )


